{"version":3,"sources":["webpack:///./src/components/videoList.vue?8be0","webpack:///src/components/videoList.vue","webpack:///./src/components/videoList.vue?2a5f","webpack:///./src/components/videoList.vue","webpack:///./src/api/video.js","webpack:///./src/views/search/search.vue?9122","webpack:///src/views/search/search.vue","webpack:///./src/views/search/search.vue?f246","webpack:///./src/views/search/search.vue","webpack:///./src/components/videoList.vue?858f","webpack:///./src/views/search/search.vue?1d7d"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","videos","length","_l","video","index","key","attrs","staticClass","_f","type","imageName","_v","_s","title","author","nick","_e","staticStyle","playCount","uploadTime","collectCount","_t","id","staticRenderFns","name","props","showAuthor","component","uploadVideo","data","userToken","ajax","headers","Authorization","recommend","getVideoPage","page","top","search","words","sortBy","searchCount","getVideoPageByUser","deleteVideoById","videoId","getvideoCountByType","searchCountMine","userId","getCollectionVideoListByUserId","getAttentionCountByUserId","deleteCollectionListByVideoIdAndUserId","getVideoByVideoId","getRecommendVideoByWord","desc","updateVideoPlayCount","readVideoBlock","block","videoName","responseType","getVideoInfo","fileName","getImageBytesOnSpecifiedTime","time","isZan","isCollectionList","addZan","addCollection","deleteZan","deleteCollection","getYoutubeDLsByUrl","url","downLoadVideoByYoutubeDl","editVideo","getType","ref","nativeOn","$event","sort","scopedSlots","_u","fn","count","pageSize","on","handleCurrent","proxy","components","VideoList","keyWord","methods","eve","init","result","res","created","beforeRouteUpdate","to","from","next"],"mappings":"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","file":"js/chunk-4f78b236.e9591d0e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{class:(\"list \" + (_vm.videos.length % 4 === 0 ? '' : _vm.videos.length % 4 === 3 ? 'list1' : 'list2') + \" \")},_vm._l((_vm.videos),function(video,index){return _c('el-col',{key:index,attrs:{\"span\":6}},[_c('router-link',{staticClass:\"videoLink\",attrs:{\"to\":(\"/detail/\" + (video.id))}},[_c('img',{attrs:{\"src\":_vm._f(\"urlFormat\")((video.type + '/' + video.imageName))}})]),_c('div',{staticClass:\"rest\"},[_c('div',[_c('router-link',{attrs:{\"to\":(\"/detail/\" + (video.id))}},[_vm._v(_vm._s(video.title))])],1),(_vm.showAuthor)?_c('div',[_c('router-link',{staticClass:\"el-icon-user\",attrs:{\"to\":(\"/user/\" + (video.author.id))}},[_vm._v(_vm._s(video.author.nick))])],1):_vm._e(),_c('div',{staticStyle:{\"margin-top\":\"0.8rem\"}},[_c('i',{staticClass:\"el-icon-video-play\",attrs:{\"title\":\"播放数\"}},[_vm._v(_vm._s(video.playCount))]),_c('i',{staticClass:\"el-icon-time\",attrs:{\"title\":\"上传时间\"}},[_vm._v(_vm._s(_vm._f(\"fullDateFormat\")(video.uploadTime)))]),_c('i',{staticClass:\"el-icon-star-off\",attrs:{\"title\":\"收藏数\"}},[_vm._v(_vm._s(video.collectCount))])]),_vm._t(\"option\",null,{\"_id\":video.id})],2)],1)}),1),_vm._t(\"pagination\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- 视频列表 -->\r\n<template>\r\n  <div>\r\n    <div :class=\"`list ${videos.length % 4 === 0 ? '' : videos.length % 4 === 3 ? 'list1' : 'list2'} `\">\r\n      <el-col :span=\"6\" v-for=\"(video, index) in videos\" :key=\"index\">\r\n        <router-link :to=\"`/detail/${video.id}`\" class=\"videoLink\">\r\n          <img :src=\"(video.type + '/' + video.imageName) | urlFormat\" />\r\n        </router-link>\r\n        <div class=\"rest\">\r\n          <div>\r\n            <router-link :to=\"`/detail/${video.id}`\">{{ video.title }}</router-link>\r\n          </div>\r\n          <!--       显示时间及播放量 收藏  个人页  -->\r\n          <div v-if=\"showAuthor\">\r\n            <router-link class=\"el-icon-user\" :to=\"`/user/${video.author.id}`\">{{ video.author.nick }}</router-link>\r\n          </div>\r\n          <div style=\"margin-top: 0.8rem\">\r\n            <i class=\"el-icon-video-play\" title=\"播放数\">{{ video.playCount }}</i>\r\n            <i class=\"el-icon-time\" title=\"上传时间\">{{ video.uploadTime | fullDateFormat }}</i>\r\n            <i class=\"el-icon-star-off\" title=\"收藏数\">{{ video.collectCount }}</i>\r\n          </div>\r\n          <!--      附加功能的插槽    -->\r\n          <slot name=\"option\" :_id=\"video.id\"></slot>\r\n        </div>\r\n      </el-col>\r\n    </div>\r\n    <!-- 分页插槽 -->\r\n    <slot name=\"pagination\"></slot>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'videoList',\r\n  props: { videos: Array, showAuthor: Boolean }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.list {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  flex-wrap: wrap;\r\n  .el-col {\r\n    width: 320px;\r\n    margin-bottom: 3rem;\r\n    img {\r\n      width: 320px;\r\n      height: 180px;\r\n      object-fit: cover;\r\n      &:hover {\r\n        transition: 0.2s;\r\n        transform: scale(1.1);\r\n      }\r\n    }\r\n  }\r\n}\r\n.list1:after {\r\n  display: block;\r\n  width: 320px;\r\n  content: '';\r\n}\r\n.list2:after {\r\n  display: block;\r\n  width: 693px;\r\n  content: '';\r\n}\r\n.videoLink {\r\n  display: block;\r\n  line-height: 0;\r\n  overflow: hidden;\r\n  border-radius: 8px 8px 0 0;\r\n}\r\n\r\n.rest {\r\n  padding: 1.2rem 0.8rem;\r\n  border-color: #b8c0cc;\r\n  border-style: solid;\r\n  border-width: 0 1px 1px;\r\n  border-radius: 0 0 8px 8px;\r\n  p {\r\n    margin: 0.6rem 0;\r\n  }\r\n  i {\r\n    color: #999999;\r\n    margin-right: 8px;\r\n    font-size: 1.2rem;\r\n    &:before {\r\n      margin-right: 4px;\r\n    }\r\n  }\r\n  .el-icon-user {\r\n    margin-top: 1rem;\r\n    font-size: 1.2rem;\r\n    color: #999;\r\n    &:hover {\r\n      color: #00a1d6;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./videoList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./videoList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./videoList.vue?vue&type=template&id=92ae931e&scoped=true&\"\nimport script from \"./videoList.vue?vue&type=script&lang=js&\"\nexport * from \"./videoList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./videoList.vue?vue&type=style&index=0&id=92ae931e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"92ae931e\",\n  null\n  \n)\n\nexport default component.exports","//视频相关\nimport ajax from './ajax'\n//  上传视频\nexport const uploadVideo = (data, userToken) => ajax('/video/upload/uploadVideo', data, 'post', { headers: { Authorization: userToken } })\n//轮播图推荐\nexport const recommend = userToken => ajax('/video/home/getLunBoPic', {}, 'get', { headers: { Authorization: userToken } })\n//分页查询\nexport const getVideoPage = (page = 1, type = '', userToken) =>\n  ajax('/video/home/getVideoPage', { page, type }, 'get', { headers: { Authorization: userToken } })\n//根据_id查询\nexport const getVideoById = _id => ajax(`/video/byId`, { _id })\n//获取弹幕 限制最多\nexport const getDanmu = player => ajax('/danmu', { player })\n//发送弹幕\nexport const sendDanmu = data => ajax('/danmu', data, 'post')\n//播放次数++\nexport const setPlayCount = _id => ajax('/video/play', { _id })\n//排行榜\nexport const top = userToken => ajax('/video/top/getTopVideo', {}, 'get', { headers: { Authorization: userToken } })\n//赞\nexport const zan = data => ajax('/video/zan', data, 'post')\n//收藏\nexport const collect = data => ajax('/video/collect', data, 'post')\n//搜索\nexport const search = (words, page, sortBy, userToken) =>\n  ajax('/video/search/searchVideos', { words, page, sortBy }, 'get', { headers: { Authorization: userToken } })\n\n//搜寻的总和\nexport const searchCount = (words, userToken) => ajax('/video/search/searchCount', { words }, 'get', { headers: { Authorization: userToken } })\n\n//获取用户上传的视频\nexport const getVideoPageByUser = (data, userToken) => ajax('/video/mine/video/getVideoPageByUser', data, 'get', { headers: { Authorization: userToken } })\n//删除视频\nexport const deleteVideoById = (videoId, userToken) => ajax('/video/mine/video/deleteVideoById', { videoId }, 'get', { headers: { Authorization: userToken } })\n\n//获取用户基本信息\nexport const getUserById = (id, userToken) => ajax('/user/userController/getUserById', { id }, 'get', { headers: { Authorization: userToken } })\n\n//获取视频总数根据类别\nexport const getvideoCountByType = (type, userToken) => ajax('/video/home/getTotalVideoByType', { type }, 'get', { headers: { Authorization: userToken } })\n\nexport const searchCountMine = (words, userId, userToken) =>\n  ajax('/video/mine/video/searchCount', { words, userId }, 'get', { headers: { Authorization: userToken } })\n//获取用户收藏的视频\nexport const getCollectionVideoListByUserId = (userId, page, userToken) =>\n  ajax('/video/mine/collection/getCollectionVideoListByUserId', { userId, page }, 'get', { headers: { Authorization: userToken } })\n//获取用户收藏视频的总数\nexport const getAttentionCountByUserId = (userId, userToken) =>\n  ajax('/video/mine/collection/getAttentionCountByUserId', { userId }, 'get', { headers: { Authorization: userToken } })\n//取消收藏\nexport const deleteCollectionListByVideoIdAndUserId = (data, userToken) =>\n  ajax('/video/mine/collection/deleteCollectionListByVideoIdAndUserId', data, 'post', { headers: { Authorization: userToken } })\n\n//获取视频总数根据类别\nexport const getVideoByVideoId = (id, userToken) => ajax('/video/detail/getVideoByVideoId', { videoId: id }, 'get', { headers: { Authorization: userToken } })\n\n//获取推荐视频视频总数\nexport const getRecommendVideoByWord = (title, desc, userToken) =>\n  ajax('/video/detail/getRecommendVideoByWord', { title, desc }, 'get', { headers: { Authorization: userToken } })\n\n//播放量加一\nexport const updateVideoPlayCount = (videoId, userToken) =>\n  ajax('/video/detail/updateVideoPlayCount', { videoId }, 'get', { headers: { Authorization: userToken } })\n\nexport const readVideoBlock = (data, userToken) =>\n  ajax('/video/detail/getVideoBlock', { type: data.type, block: data.block, videoName: data.videoName }, 'get', {\n    headers: { Authorization: userToken },\n    responseType: 'arraybuffer'\n  })\n\nexport const getVideoInfo = (type, fileName, userToken) =>\n  ajax('/video/detail/getVideoInfo', { type, fileName }, 'get', {\n    headers: { Authorization: userToken }\n  })\nexport const getImageBytesOnSpecifiedTime = (type, fileName, time, userToken) =>\n  ajax('/video/detail/getImageBytesOnSpecifiedTime', { type: type, videoName: fileName, time: time }, 'get', {\n    headers: { Authorization: userToken },\n    responseType: 'blob'\n  })\n\nexport const isZan = (data, userToken) => ajax('/video/detail/isZan', data, 'post', { headers: { Authorization: userToken } })\nexport const isCollectionList = (data, userToken) => ajax('/video/detail/isCollectionList', data, 'post', { headers: { Authorization: userToken } })\nexport const addZan = (data, userToken) => ajax('/video/detail/addZan', data, 'post', { headers: { Authorization: userToken } })\nexport const addCollection = (data, userToken) => ajax('/video/detail/addCollection', data, 'post', { headers: { Authorization: userToken } })\nexport const deleteZan = (data, userToken) => ajax('/video/detail/deleteZan', data, 'post', { headers: { Authorization: userToken } })\nexport const deleteCollection = (data, userToken) => ajax('/video/detail/deleteCollection', data, 'post', { headers: { Authorization: userToken } })\nexport const getYoutubeDLsByUrl = (url, userToken) =>\n  ajax('/video/webUpload/getYoutubeDLsByUrl', { url: url }, 'get', { headers: { Authorization: userToken } })\nexport const downLoadVideoByYoutubeDl = (data, userToken) =>\n  ajax('/video/webUpload/downLoadVideoByYoutubeDl', data, 'post', { headers: { Authorization: userToken } })\nexport const editVideo = (data, userToken) => ajax('/video/admin/video/editVideo', data, 'post', { headers: { Authorization: userToken } })\nexport const getType = userToken => ajax('/video/admin/video/getType', {}, 'get', { headers: { Authorization: userToken } })\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"list\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":4}},[_vm._v(\"综合排序\")]),_c('el-col',{ref:\"col1\",attrs:{\"span\":4},nativeOn:{\"click\":function($event){return _vm.sort('playCount', $event)}}},[_vm._v(\"最多播放\")]),_c('el-col',{ref:\"col2\",attrs:{\"span\":4},nativeOn:{\"click\":function($event){return _vm.sort('uploadTime', $event)}}},[_vm._v(\"最新上传\")])],1),_c('div',{staticStyle:{\"height\":\"1px\",\"border-bottom\":\"2px solid #E5E9EF\",\"margin\":\"2rem 0\"}}),_c('VideoList',{attrs:{\"videos\":_vm.videos,\"showAuthor\":true},scopedSlots:_vm._u([{key:\"pagination\",fn:function(){return [_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.page,\"layout\":\"prev, pager, next,total\",\"total\":_vm.count,\"page-size\":_vm.pageSize,\"hide-on-single-page\":\"\"},on:{\"current-change\":_vm.handleCurrent}})]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"list\">\n    <el-row>\n      <el-col :span=\"4\">综合排序</el-col>\n      <el-col :span=\"4\" ref=\"col1\" @click.native=\"sort('playCount', $event)\">最多播放</el-col>\n      <el-col :span=\"4\" ref=\"col2\" @click.native=\"sort('uploadTime', $event)\">最新上传</el-col>\n    </el-row>\n    <div style=\"height: 1px ;border-bottom: 2px solid #E5E9EF;margin: 2rem 0\"></div>\n    <VideoList :videos=\"videos\" :showAuthor=\"true\">\n      <template v-slot:pagination>\n        <el-pagination\n          background\n          :current-page=\"page\"\n          layout=\"prev, pager, next,total\"\n          :total=\"count\"\n          :page-size=\"pageSize\"\n          @current-change=\"handleCurrent\"\n          hide-on-single-page\n        ></el-pagination>\n      </template>\n    </VideoList>\n  </div>\n</template>\n<script>\nimport VideoList from '../../components/videoList'\nimport { search, searchCount } from '../../api/video'\nexport default {\n  name: 'search',\n  components: { VideoList },\n  data() {\n    return {\n      keyWord: '',\n      page: 1,\n      videos: [],\n      count: 0,\n      sortBy: '',\n      pageSize: 10\n    }\n  },\n  methods: {\n    //分页变化时\n    handleCurrent(page) {\n      this.page = page\n      this.init(page, this.sortBy)\n    },\n    sort(key, eve) {\n      // 重置样式\n      this.$refs.col1.$el.className = 'el-col el-col-4'\n      this.$refs.col2.$el.className = 'el-col el-col-4'\n      eve.target.className += ' active'\n      //根据关键字排序\n      this.sortBy = key\n      this.init(1, key)\n      this.page = 1\n    },\n    async init(page = 1, sortBy = '') {\n      let result = await search(this.keyWord, page, sortBy, this.$store.state.user.token)\n      if (result.code == 200) {\n        this.videos = result.data\n      }\n      let res = await searchCount(this.keyWord, this.$store.state.user.token)\n      if (res.code == 200) {\n        this.count = res.data\n      }\n    }\n  },\n  created() {\n    let { keyWord } = this.$route.query\n    this.keyWord = keyWord\n    this.init()\n  },\n  beforeRouteUpdate(to, from, next) {\n    let { keyWord } = to.query\n    this.keyWord = keyWord\n    this.$refs.col1.$el.className = 'el-col el-col-4'\n    this.$refs.col2.$el.className = 'el-col el-col-4'\n    this.page = 1\n    this.sortBy = ''\n    this.init()\n    next()\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.list {\n  margin-top: 3rem;\n}\n.el-row {\n  width: 50rem;\n  height: 3rem;\n  text-align: center;\n  line-height: 3rem;\n  margin-bottom: 1rem;\n  .el-col:first-child {\n    background-color: #00a1d6;\n    color: white;\n    border-radius: 1rem;\n  }\n  .el-col:not(:first-child) {\n    cursor: pointer;\n  }\n}\n.active {\n  color: #00a1d6;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=37dd2c4a&scoped=true&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=37dd2c4a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37dd2c4a\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./videoList.vue?vue&type=style&index=0&id=92ae931e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./videoList.vue?vue&type=style&index=0&id=92ae931e&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=style&index=0&id=37dd2c4a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=style&index=0&id=37dd2c4a&lang=scss&scoped=true&\""],"sourceRoot":""}