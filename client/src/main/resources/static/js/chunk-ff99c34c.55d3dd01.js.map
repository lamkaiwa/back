{"version":3,"sources":["webpack:///./src/api/video.js","webpack:///./src/views/admin/children/videos.vue?e24e","webpack:///src/views/admin/children/videos.vue","webpack:///./src/views/admin/children/videos.vue?ecc9","webpack:///./src/views/admin/children/videos.vue","webpack:///./src/views/admin/children/videos.vue?b70c"],"names":["uploadVideo","data","userToken","ajax","headers","Authorization","recommend","getVideoPage","page","type","top","search","words","sortBy","searchCount","getVideoPageByUser","deleteVideoById","videoId","getvideoCountByType","searchCountMine","userId","getCollectionVideoListByUserId","getAttentionCountByUserId","deleteCollectionListByVideoIdAndUserId","getVideoByVideoId","id","getRecommendVideoByWord","title","desc","updateVideoPlayCount","readVideoBlock","block","videoName","responseType","getVideoInfo","fileName","getImageBytesOnSpecifiedTime","time","isZan","isCollectionList","addZan","addCollection","deleteZan","deleteCollection","getYoutubeDLsByUrl","url","downLoadVideoByYoutubeDl","editVideo","getType","render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","staticStyle","videos","scopedSlots","_u","key","fn","scope","_v","_s","_f","row","uploadTime","on","$event","$index","deleteVideo","count","pageSize","handleCurrent","dialogFormVisible","newVideo","model","value","callback","$$v","$set","expression","_l","index","slot","submit","staticRenderFns","name","keyWords","types","methods","uploadAt","result","location","video","init","getVideosByPage","typeRes","getVideosCount","videoRes","created","component"],"mappings":"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","file":"js/chunk-ff99c34c.55d3dd01.js","sourcesContent":["//视频相关\nimport ajax from './ajax'\n//  上传视频\nexport const uploadVideo = (data, userToken) => ajax('/video/upload/uploadVideo', data, 'post', { headers: { Authorization: userToken } })\n//轮播图推荐\nexport const recommend = userToken => ajax('/video/home/getLunBoPic', {}, 'get', { headers: { Authorization: userToken } })\n//分页查询\nexport const getVideoPage = (page = 1, type = '', userToken) =>\n  ajax('/video/home/getVideoPage', { page, type }, 'get', { headers: { Authorization: userToken } })\n//根据_id查询\nexport const getVideoById = _id => ajax(`/video/byId`, { _id })\n//获取弹幕 限制最多\nexport const getDanmu = player => ajax('/danmu', { player })\n//发送弹幕\nexport const sendDanmu = data => ajax('/danmu', data, 'post')\n//播放次数++\nexport const setPlayCount = _id => ajax('/video/play', { _id })\n//排行榜\nexport const top = userToken => ajax('/video/top/getTopVideo', {}, 'get', { headers: { Authorization: userToken } })\n//赞\nexport const zan = data => ajax('/video/zan', data, 'post')\n//收藏\nexport const collect = data => ajax('/video/collect', data, 'post')\n//搜索\nexport const search = (words, page, sortBy, userToken) =>\n  ajax('/video/search/searchVideos', { words, page, sortBy }, 'get', { headers: { Authorization: userToken } })\n\n//搜寻的总和\nexport const searchCount = (words, userToken) => ajax('/video/search/searchCount', { words }, 'get', { headers: { Authorization: userToken } })\n\n//获取用户上传的视频\nexport const getVideoPageByUser = (data, userToken) => ajax('/video/mine/video/getVideoPageByUser', data, 'get', { headers: { Authorization: userToken } })\n//删除视频\nexport const deleteVideoById = (videoId, userToken) => ajax('/video/mine/video/deleteVideoById', { videoId }, 'get', { headers: { Authorization: userToken } })\n\n//获取用户基本信息\nexport const getUserById = (id, userToken) => ajax('/user/userController/getUserById', { id }, 'get', { headers: { Authorization: userToken } })\n\n//获取视频总数根据类别\nexport const getvideoCountByType = (type, userToken) => ajax('/video/home/getTotalVideoByType', { type }, 'get', { headers: { Authorization: userToken } })\n\nexport const searchCountMine = (words, userId, userToken) =>\n  ajax('/video/mine/video/searchCount', { words, userId }, 'get', { headers: { Authorization: userToken } })\n//获取用户收藏的视频\nexport const getCollectionVideoListByUserId = (userId, page, userToken) =>\n  ajax('/video/mine/collection/getCollectionVideoListByUserId', { userId, page }, 'get', { headers: { Authorization: userToken } })\n//获取用户收藏视频的总数\nexport const getAttentionCountByUserId = (userId, userToken) =>\n  ajax('/video/mine/collection/getAttentionCountByUserId', { userId }, 'get', { headers: { Authorization: userToken } })\n//取消收藏\nexport const deleteCollectionListByVideoIdAndUserId = (data, userToken) =>\n  ajax('/video/mine/collection/deleteCollectionListByVideoIdAndUserId', data, 'post', { headers: { Authorization: userToken } })\n\n//获取视频总数根据类别\nexport const getVideoByVideoId = (id, userToken) => ajax('/video/detail/getVideoByVideoId', { videoId: id }, 'get', { headers: { Authorization: userToken } })\n\n//获取推荐视频视频总数\nexport const getRecommendVideoByWord = (title, desc, userToken) =>\n  ajax('/video/detail/getRecommendVideoByWord', { title, desc }, 'get', { headers: { Authorization: userToken } })\n\n//播放量加一\nexport const updateVideoPlayCount = (videoId, userToken) =>\n  ajax('/video/detail/updateVideoPlayCount', { videoId }, 'get', { headers: { Authorization: userToken } })\n\nexport const readVideoBlock = (data, userToken) =>\n  ajax('/video/detail/getVideoBlock', { type: data.type, block: data.block, videoName: data.videoName }, 'get', {\n    headers: { Authorization: userToken },\n    responseType: 'arraybuffer'\n  })\n\nexport const getVideoInfo = (type, fileName, userToken) =>\n  ajax('/video/detail/getVideoInfo', { type, fileName }, 'get', {\n    headers: { Authorization: userToken }\n  })\nexport const getImageBytesOnSpecifiedTime = (type, fileName, time, userToken) =>\n  ajax('/video/detail/getImageBytesOnSpecifiedTime', { type: type, videoName: fileName, time: time }, 'get', {\n    headers: { Authorization: userToken },\n    responseType: 'blob'\n  })\n\nexport const isZan = (data, userToken) => ajax('/video/detail/isZan', data, 'post', { headers: { Authorization: userToken } })\nexport const isCollectionList = (data, userToken) => ajax('/video/detail/isCollectionList', data, 'post', { headers: { Authorization: userToken } })\nexport const addZan = (data, userToken) => ajax('/video/detail/addZan', data, 'post', { headers: { Authorization: userToken } })\nexport const addCollection = (data, userToken) => ajax('/video/detail/addCollection', data, 'post', { headers: { Authorization: userToken } })\nexport const deleteZan = (data, userToken) => ajax('/video/detail/deleteZan', data, 'post', { headers: { Authorization: userToken } })\nexport const deleteCollection = (data, userToken) => ajax('/video/detail/deleteCollection', data, 'post', { headers: { Authorization: userToken } })\nexport const getYoutubeDLsByUrl = (url, userToken) =>\n  ajax('/video/webUpload/getYoutubeDLsByUrl', { url: url }, 'get', { headers: { Authorization: userToken } })\nexport const downLoadVideoByYoutubeDl = (data, userToken) =>\n  ajax('/video/webUpload/downLoadVideoByYoutubeDl', data, 'post', { headers: { Authorization: userToken } })\nexport const editVideo = (data, userToken) => ajax('/video/admin/video/editVideo', data, 'post', { headers: { Authorization: userToken } })\nexport const getType = userToken => ajax('/video/admin/video/getType', {}, 'get', { headers: { Authorization: userToken } })\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"video\"}},[_c('main',[_c('div',{staticClass:\"table\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.videos}},[_c('el-table-column',{attrs:{\"sortable\":\"\",\"prop\":\"id\",\"label\":\"id\"}}),_c('el-table-column',{attrs:{\"sortable\":\"\",\"prop\":\"author.email\",\"label\":\"作者邮箱\"}}),_c('el-table-column',{attrs:{\"sortable\":\"\",\"prop\":\"title\",\"label\":\"标题\"}}),_c('el-table-column',{attrs:{\"label\":\"类型\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm._f(\"videoTypeFormat\")(scope.row.type))+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"desc\",\"label\":\"描述\"}}),_c('el-table-column',{attrs:{\"label\":\"上传时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm._f(\"fullDateFormat\")(scope.row.uploadTime))+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"封面\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-image',{staticStyle:{\"width\":\"100px\",\"height\":\"75px\"},attrs:{\"fit\":\"cover\",\"src\":(_vm.url + \"/video/imageController/getVideoImage/\" + (scope.row.type) + \"/\" + (scope.row.imageName))}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"playCount\",\"label\":\"播放数\"}}),_c('el-table-column',{attrs:{\"prop\":\"zanCount\",\"label\":\"点赞数\"}}),_c('el-table-column',{attrs:{\"prop\":\"collectCount\",\"label\":\"收藏数\"}}),_c('el-table-column',{attrs:{\"align\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{on:{\"click\":function($event){return _vm.editVideo(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.deleteVideo(scope.$index, scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-pagination',{staticStyle:{\"text-align\":\"center\",\"margin\":\"8px 0\"},attrs:{\"background\":\"\",\"current-page\":_vm.page,\"layout\":\"prev, pager, next,total\",\"total\":_vm.count,\"page-size\":_vm.pageSize,\"hide-on-single-page\":\"\"},on:{\"current-change\":_vm.handleCurrent}})],1),_c('div',[_c('el-dialog',{attrs:{\"title\":\"编辑\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.newVideo,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"标题\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.newVideo.title),callback:function ($$v) {_vm.$set(_vm.newVideo, \"title\", $$v)},expression:\"newVideo.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"类型\"}},[_c('el-select',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.newVideo.type),callback:function ($$v) {_vm.$set(_vm.newVideo, \"type\", $$v)},expression:\"newVideo.type\"}},_vm._l((_vm.types),function(type,index){return _c('el-option',{key:index,attrs:{\"label\":type,\"value\":index + 1}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.newVideo.desc),callback:function ($$v) {_vm.$set(_vm.newVideo, \"desc\", $$v)},expression:\"newVideo.desc\"}})],1),_c('el-form-item',{attrs:{\"label\":\"时间\"}},[_c('div',{staticClass:\"block\"},[_c('el-date-picker',{attrs:{\"type\":\"datetime\",\"placeholder\":\"选择日期\"},model:{value:(_vm.newVideo.uploadTime),callback:function ($$v) {_vm.$set(_vm.newVideo, \"uploadTime\", $$v)},expression:\"newVideo.uploadTime\"}})],1)]),_c('el-form-item',{attrs:{\"label\":\"播放数\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.newVideo.playCount),callback:function ($$v) {_vm.$set(_vm.newVideo, \"playCount\", $$v)},expression:\"newVideo.playCount\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submit()}}},[_vm._v(\"确 定\")])],1)],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"video\">\n    <main>\n      <div class=\"table\">\n        <el-table :data=\"videos\" style=\"width: 100%\">\n          <el-table-column sortable prop=\"id\" label=\"id\"></el-table-column>\n          <el-table-column sortable prop=\"author.email\" label=\"作者邮箱\"></el-table-column>\n          <el-table-column sortable prop=\"title\" label=\"标题\"></el-table-column>\n          <el-table-column label=\"类型\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.type | videoTypeFormat }}\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"desc\" label=\"描述\"></el-table-column>\n          <el-table-column label=\"上传时间\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.uploadTime | fullDateFormat }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"封面\">\n            <template slot-scope=\"scope\">\n              <el-image\n                style=\"width: 100px;height: 75px\"\n                fit=\"cover\"\n                :src=\"`${url}/video/imageController/getVideoImage/${scope.row.type}/${scope.row.imageName}`\"\n              ></el-image>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"playCount\" label=\"播放数\"></el-table-column>\n          <el-table-column prop=\"zanCount\" label=\"点赞数\"></el-table-column>\n          <el-table-column prop=\"collectCount\" label=\"收藏数\"></el-table-column>\n          <el-table-column align=\"right\">\n            <template slot-scope=\"scope\">\n              <el-button @click=\"editVideo(scope.$index, scope.row)\">编辑</el-button>\n              <el-button type=\"danger\" @click=\"deleteVideo(scope.$index, scope.row.id)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n        <!--        分页-->\n        <el-pagination\n          style=\"text-align: center;margin: 8px 0\"\n          background\n          :current-page=\"page\"\n          layout=\"prev, pager, next,total\"\n          :total=\"count\"\n          :page-size=\"pageSize\"\n          @current-change=\"handleCurrent\"\n          hide-on-single-page\n        ></el-pagination>\n      </div>\n      <div>\n        <el-dialog title=\"编辑\" :visible.sync=\"dialogFormVisible\">\n          <el-form :model=\"newVideo\" label-width=\"80px\">\n            <el-form-item label=\"标题\">\n              <el-input v-model=\"newVideo.title\" autocomplete=\"off\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"类型\">\n              <el-select v-model=\"newVideo.type\" autocomplete=\"off\">\n                <el-option v-for=\"(type, index) in types\" :label=\"type\" :value=\"index + 1\" :key=\"index\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"描述\">\n              <el-input v-model=\"newVideo.desc\" autocomplete=\"off\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"时间\">\n              <div class=\"block\">\n                <el-date-picker v-model=\"newVideo.uploadTime\" type=\"datetime\" placeholder=\"选择日期\"> </el-date-picker>\n              </div>\n            </el-form-item>\n            <el-form-item label=\"播放数\">\n              <el-input v-model=\"newVideo.playCount\" autocomplete=\"off\"></el-input>\n            </el-form-item>\n          </el-form>\n          <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"submit()\">确 定</el-button>\n          </div>\n        </el-dialog>\n      </div>\n    </main>\n  </div>\n</template>\n<script>\nimport { url } from '../../../api/ajax'\nimport { getVideosByPage, deleteVideo, getVideosCount } from '../../../api/user'\nimport { editVideo, getType } from '../../../api/video'\nexport default {\n  name: 'User',\n  data() {\n    return {\n      url: url,\n      page: 1,\n      count: 0,\n      pageSize: 10,\n      keyWords: '',\n      videos: [],\n      dialogFormVisible: false,\n      newVideo: {},\n      // 视频分类\n      types: ['生活', '科技', '游戏', '校园', '教育', '动物', '其他']\n    }\n  },\n  methods: {\n    async submit() {\n      let uploadAt = this.newVideo.uploadTime\n      this.newVideo.uploadTime = uploadAt.getTime ? uploadAt.getTime() : uploadAt\n      let result = await editVideo(this.newVideo, this.$store.state.user.token)\n      if (result.code == 200) {\n        this.dialogFormVisible = false\n        this.$message.success('修改成功')\n        location.reload()\n      }\n    },\n    editVideo(index, video) {\n      this.dialogFormVisible = true\n      this.newVideo = video\n    },\n    deleteVideo(index, id) {\n      this.$confirm('是否删除?', { type: 'warning' }).then(async () => {\n        let result = await deleteVideo(id, this.$store.state.user.token)\n        if (result.code == 200) {\n          this.$message.success('删除视频成功')\n          this.page = 1\n          this.init()\n        }\n      })\n    },\n    handleCurrent(index) {\n      this.page = index\n      this.init()\n    },\n    async init() {\n      let result = await getVideosByPage(this.page, this.$store.state.user.token)\n      if (result.code == 200) {\n        this.videos = result.data\n      }\n      let typeRes = await getType(this.$store.state.user.token)\n      if (typeRes.code == 200) {\n        this.types = typeRes.data\n      }\n      let videoRes = await getVideosCount(this.$store.state.user.token)\n      if (videoRes.code == 200) {\n        this.count = videoRes.data\n      }\n    }\n  },\n  created() {\n    this.init()\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n#video {\n  main {\n    margin: 2rem;\n    border-radius: 4px;\n    background-color: white;\n    padding: 1rem;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./videos.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./videos.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./videos.vue?vue&type=template&id=1c0080ee&scoped=true&\"\nimport script from \"./videos.vue?vue&type=script&lang=js&\"\nexport * from \"./videos.vue?vue&type=script&lang=js&\"\nimport style0 from \"./videos.vue?vue&type=style&index=0&id=1c0080ee&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c0080ee\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./videos.vue?vue&type=style&index=0&id=1c0080ee&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./videos.vue?vue&type=style&index=0&id=1c0080ee&lang=scss&scoped=true&\""],"sourceRoot":""}